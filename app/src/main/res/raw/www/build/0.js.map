{"version":3,"sources":["../../src/pages/add/add.module.ts","../../src/pages/add/add.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddPage } from './add';\n\n@NgModule({\n  declarations: [\n    AddPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddPage),\n  ],\n})\nexport class AddPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add/add.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\nimport { ImageProvider } from '../../providers//image/image';\nimport { DatabaseProvider } from '../../providers/database/database';\n\n/**\n * Generated class for the AddPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-add',\n  templateUrl: 'add.html',\n})\nexport class AddPage {\n\n  public form: FormGroup;\n  public studentNom: any;\n  public studentPrenom: any;\n  public studentAge: any;\n  public studentSexe: any;\n  public studentQuartier: any;\n  public studentContact: any;\n  public studentNomParent: any;\n  public studentContactParent: any;\n  public studentBac: any;\n  public studentLycee: any;\n  public studentImage: any;\n  public characterImage: any;\n  public recordId: any;\n  public revisionId: any;\n  public isEdited: boolean = false;\n  public hideForm: boolean = false;\n  public pageTitle: string;\n\n  constructor(public navCtrl: NavController, public NP: NavParams,\n    public fb: FormBuilder,\n    public IMAGE: ImageProvider,\n    public DB: DatabaseProvider,\n    public toastCtrl: ToastController) {\n\n      this.form = this.fb.group({\n        \"nom\": [\"\", Validators.required],\n        \"prenom\": [\"\", Validators.required],\n        \"age\": [\"\", !Validators.required],\n        \"sexe\": [\"\", !Validators.required],\n        \"bac\": [\"\", !Validators.required],\n        \"lycee\": [\"\", !Validators.required],\n        \"image\": [\"\", !Validators.required],\n        \"quartier\": [\"\", !Validators.required],\n        \"contact\": [\"\", Validators.required],\n        \"nomParent\": [\"\", !Validators.required],\n        \"contactParent\": [\"\", !Validators.required]\n      });\n  \n      this.resetFields();\n  \n  \n      if (this.NP.get(\"key\") && this.NP.get(\"rev\")) {\n        this.recordId = this.NP.get(\"key\");\n        this.revisionId = this.NP.get(\"rev\");\n        this.isEdited = true;\n        this.selectStudent(this.recordId);\n        this.pageTitle = 'Amend entry';\n      }\n      else {\n        this.recordId = '';\n        this.revisionId = '';\n        this.isEdited = false;\n        this.pageTitle = 'Create entry';\n      }\n      \n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad AddPage');\n\n    \n  }\n\n\n\n  selectStudent(id) {\n    this.DB.retrieveStudent(id)\n      .then((doc) => {\n        this.studentNom = doc[0].nom;\n        this.studentPrenom = doc[0].prenom;\n        this.studentAge = doc[0].age;\n        this.studentSexe = doc[0].sexe;\n        this.studentQuartier = doc[0].quartier;\n        this.studentContact = doc[0].contact;\n        this.studentNomParent = doc[0].nomParent;\n        this.studentContactParent = doc[0].contactParent;\n        this.studentBac = doc[0].bac;\n        this.studentLycee = doc[0].lycee;\n        this.studentImage = doc[0].image;\n        this.characterImage = doc[0].image;\n        this.recordId = doc[0].id;\n        this.revisionId = doc[0].rev;\n      });\n  }\n\n\n\n  saveStudent() {\n    let image;\n    if(this.form.controls[\"image\"].value === \"\"){\n      image = \"assets/imgs/logo.png\";\n    }else{\n      image = this.form.controls[\"image\"].value;\n    }\n    let nom: string = this.form.controls[\"nom\"].value,\n      prenom: string = this.form.controls[\"prenom\"].value,\n      age: number = this.form.controls[\"age\"].value,\n      sexe: string = this.form.controls[\"sexe\"].value,\n      quartier: string = this.form.controls[\"quartier\"].value,\n      contact: string = this.form.controls[\"contact\"].value,\n      nomParent: string = this.form.controls[\"nomParent\"].value,\n      contactParent: string = this.form.controls[\"contactParent\"].value,\n      bac: string = this.form.controls[\"bac\"].value,\n      lycee: string = this.form.controls[\"lycee\"].value,\n      //image: string = this.form.controls[\"image\"].value,\n      revision: string = this.revisionId,\n      id: any = this.recordId;\n\n    if (this.recordId !== '') {\n      this.DB.updateStudent(id, nom, prenom, age, quartier, sexe, contact, bac, lycee, nomParent, contactParent, image, revision)\n        .then((data) => {\n          this.hideForm = true;\n          this.sendNotification(`${nom} ${prenom} a été mise à jour avec succès`);\n        });\n    }\n    else {\n      this.DB.addStudent(nom, prenom, age, quartier, sexe, contact, bac, lycee, nomParent, contactParent, image)\n        .then((data) => {\n          this.hideForm = true;\n          this.resetFields();\n          this.sendNotification(`${nom} ${prenom} a été ajouté à la liste`);\n        });\n    }\n  }\n\n\n\n  takePhotograph() {\n    this.IMAGE.takePhotograph()\n      .then((image) => {\n        this.characterImage = image.toString();\n        this.studentImage = image.toString();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n\n\n  selectImage() {\n    this.IMAGE.selectPhotograph()\n      .then((image) => {\n        this.characterImage = image.toString();\n        this.studentImage = image.toString();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n\n\n  deleteStudent() {\n    let nom, prenom;\n\n    this.DB.retrieveStudent(this.recordId)\n      .then((doc) => {\n        nom = doc[0].nom;\n        prenom = doc[0].prenom;\n        return this.DB.removeStudent(this.recordId, this.revisionId);\n      })\n      .then((data) => {\n        this.hideForm = true;\n        this.sendNotification(`${nom} ${prenom} a été supprimé de la liste avec succès`);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n\n\n  resetFields(): void {\n    this.studentNom = \"\";\n    this.studentPrenom = \"\";\n    this.studentAge = \"\";\n    this.studentQuartier = \"\";\n    this.studentContact = \"\";\n    this.studentNomParent = \"\";\n    this.studentContactParent = \"\";\n    this.studentLycee = \"\";\n    this.studentImage = \"\";\n    this.characterImage = \"\";\n  }\n\n\n\n  sendNotification(message): void {\n    let notification = this.toastCtrl.create({\n      message: message,\n      duration: 3000\n    });\n    notification.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add/add.ts"],"sourceRoot":""}